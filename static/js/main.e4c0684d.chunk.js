(window.webpackJsonpaviasales=window.webpackJsonpaviasales||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/Logo.96990a1b.svg"},21:function(e,t,a){e.exports=a(38)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),i=a.n(c),s=a(3),l=(a(31),a(20)),o=a.n(l),u=a(10),m=a(2),p=a(6),d=a(8),f=a(7),E=a(5),h=a(9),v=(a(32),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={price:!0,duration:!1},a.setActiveButton=a.setActiveButton.bind(Object(E.a)(a)),a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"setActiveButton",value:function(e,t,a){this.props.setSortValue(a),this.setState(function(a){var n;if(!a[e])return n={},Object(u.a)(n,e,!a[e]),Object(u.a)(n,t,!a[t]),n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tickets-sort-settings-wrapper"},r.a.createElement("input",{id:"price",className:"tickets-sort-settings-btn "+(!0===this.state.price?"active":""),type:"button",onClick:function(t){return e.setActiveButton("price","duration","sortByPrice")},value:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"}),r.a.createElement("input",{id:"duration",className:"tickets-sort-settings-btn "+(!0===this.state.duration?"active":""),type:"button",onClick:function(t){return e.setActiveButton("duration","price","sortByDuration")},value:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"}))}}]),t}(n.Component)),k={setSortValue:function(e){return{type:"SET_SORT_VALUE",payload:e}}},b=Object(s.b)(null,k)(v),y=(a(33),function(e){var t=e.ticket,a=String(t.price).split("");a.splice(-3,0," ");var n=a.join("");return r.a.createElement("div",{className:"ticket-item-wrapper"},r.a.createElement("div",{className:"ticket-item-header"},r.a.createElement("p",{className:"ticket-item-price"},n," \u0420"),r.a.createElement("img",{className:"ticket-item-logo",src:"//pics.avs.io/99/36/".concat(t.carrier,".png"),alt:"Company-logo"})),r.a.createElement("ul",null,t.segments.map(function(e,t){var a=Math.floor(e.duration/60),n=e.duration-60*a,c="".concat(a,"\u0447 ").concat(n,"\u043c"),i=e.stops.length>1?"".concat(e.stops.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"):e.stops.length>0?"".concat(e.stops.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"):"".concat(e.stops.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),s=new Date(e.date),l=new Date(e.date);return l.setSeconds(s.getSeconds()+e.duration),r.a.createElement("li",{key:t},r.a.createElement("div",{className:"ticket-item-content"},r.a.createElement("div",{className:"ticket-item-route"},r.a.createElement("p",{className:"ticket-item-route-title"},e.origin," \u2013 ",e.destination),r.a.createElement("p",{className:"ticket-item-route-text"},"".concat(("0"+s.getHours()).slice(-2),":").concat(("0"+s.getMinutes()).slice(-2))," ","\u2013"," ","".concat(("0"+l.getHours()).slice(-2),":").concat(("0"+l.getMinutes()).slice(-2)))),r.a.createElement("div",{className:"ticket-item-route"},r.a.createElement("p",{className:"ticket-item-route-title"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("p",{className:"ticket-item-route-text"},c)),r.a.createElement("div",{className:"ticket-item-route"},r.a.createElement("p",{className:"ticket-item-route-title"},i),r.a.createElement("p",{className:"ticket-item-route-text"},e.stops.join(", ")))))})))}),g=function(e){var t=e.tickets;return r.a.createElement("ul",null,t.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(y,{ticket:e}))}))},O=r.a.createContext(),N=O.Provider,j=O.Consumer,S=function(e){return function(t){return r.a.createElement(j,null,function(a){return r.a.createElement(e,Object.assign({},t,{aviasalesService:a}))})}},w=(a(34),function(){return r.a.createElement("div",{className:"error-indicator-wrapper"},r.a.createElement("div",{className:"error-message-wrapper"},r.a.createElement("div",{className:"error-message-title"},"\u041e\u0448\u0438\u0431\u043a\u0430"),r.a.createElement("div",null,"\u0411\u0438\u043b\u0435\u0442\u044b \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b ",r.a.createElement("br",null)," \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!")))}),T=(a(35),function(){return r.a.createElement("div",{className:"lds-css wrapper"},r.a.createElement("div",{className:"lds-magnify"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null),r.a.createElement("div",null)))))}),_=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.aviasalesService,a=e.ticketsLoaded,n=e.ticketsError;t.getTickets().then(function(e){a(e.tickets)}).catch(function(e){n(e.message)})}},{key:"render",value:function(){var e=this.props,t=e.tickets,a=e.isTicketsLoaded,n=e.error,c=a||n?null:r.a.createElement(T,null),i=a||n,s=n?r.a.createElement(w,null):null,l=i?r.a.createElement(g,{tickets:t}):null;return r.a.createElement(r.a.Fragment,null,s,c,l)}}]),t}(n.Component),C=function(e,t){return e.price<t.price?-1:e.price>t.price?1:0},x=function(e,t){return e.summDuration()<t.summDuration()?-1:e.summDuration()>t.summDuration()?1:0};function V(e,t,a){var n=e,r=!0,c=!1,i=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){s.value.summDuration=function(){return this.segments.reduce(function(e,t){return e+t.duration},0)}}}catch(o){c=!0,i=o}finally{try{r||null==l.return||l.return()}finally{if(c)throw i}}return n=t.all?e:e.filter(function(e){var a=!0,n=!1,r=void 0;try{for(var c,i=e.segments[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){var s=c.value;if(!t[s.stops.length])return!1}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return!0}),"sortByPrice"===a?n=n.sort(C):"sortByDuration"===a&&(n=n.sort(x)),n.slice(0,5)}var D={ticketsLoaded:function(e){return{type:"FETCH_TICKETS_SUCCESS",payload:e}},ticketsError:function(e){return{type:"FETCH_TICKETS_FAILURE",payload:e}}},L=S(Object(s.b)(function(e){var t=e.tickets,a=e.isTicketsLoaded,n=e.stopsValue,r=e.sortValue,c=e.error;return{tickets:V(t,n,r),isTicketsLoaded:a,error:c}},D)(_)),P=(a(36),{setStopsValue:function(e){return{type:"SET_STOPS_VALUE",payload:e}}}),A=Object(s.b)(function(e){return{stopsValue:e.stopsValue}},P)(function(e){var t=e.stopsValue,a=e.setStopsValue;return r.a.createElement("div",{className:"tickets-filter-wrapper"},r.a.createElement("h2",{className:"tickets-filter-title"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.a.createElement("ul",{className:"tickets-filter-list"},r.a.createElement("li",{className:"tickets-filter-list-item"},r.a.createElement("label",{className:"tickets-filter-list-item-label",htmlFor:"chk-all"},r.a.createElement("input",{id:"chk-all",type:"checkbox",className:"visually-hidden",defaultChecked:t.all,onChange:function(){return a("all")},checked:t.all}),r.a.createElement("span",{className:"checkbox-indicator"})," \u0412\u0441\u0435")),r.a.createElement("li",{className:"tickets-filter-list-item"},r.a.createElement("label",{className:"tickets-filter-list-item-label",htmlFor:"chk-0"},r.a.createElement("input",{id:"chk-0",type:"checkbox",className:"visually-hidden",onChange:function(){return a("0")},checked:t.zero}),r.a.createElement("span",{className:"checkbox-indicator"})," \u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a")),r.a.createElement("li",{className:"tickets-filter-list-item"},r.a.createElement("label",{className:"tickets-filter-list-item-label",htmlFor:"chk-1"},r.a.createElement("input",{id:"chk-1",type:"checkbox",className:"visually-hidden",onChange:function(){return a("1")},checked:t.one}),r.a.createElement("span",{className:"checkbox-indicator"})," 1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430")),r.a.createElement("li",{className:"tickets-filter-list-item"},r.a.createElement("label",{className:"tickets-filter-list-item-label",htmlFor:"chk-2"},r.a.createElement("input",{id:"chk-2",type:"checkbox",className:"visually-hidden",onChange:function(){return a("2")},checked:t.two}),r.a.createElement("span",{className:"checkbox-indicator"})," 2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")),r.a.createElement("li",{className:"tickets-filter-list-item"},r.a.createElement("label",{className:"tickets-filter-list-item-label",htmlFor:"chk-3"},r.a.createElement("input",{id:"chk-3",type:"checkbox",className:"visually-hidden",onChange:function(){return a("3")},checked:t.three}),r.a.createElement("span",{className:"checkbox-indicator"})," 3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"))))}),F=function(){return r.a.createElement("div",{className:"app-wrapp"},r.a.createElement("div",{className:"app-logo-wrapper"},r.a.createElement("img",{src:o.a,alt:"logo"})),r.a.createElement("div",{className:"components-wrapper"},r.a.createElement("div",null,r.a.createElement(A,null)),r.a.createElement("div",null,r.a.createElement(b,null),r.a.createElement(L,null))))},B=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(w,null):this.props.children}}]),t}(n.Component),I=a(11),U=a.n(I),R=a(17),H=a(13);function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var X={tickets:[],isTicketsLoaded:!1,error:null,stopsValue:{all:!0,0:!1,1:!1,2:!1,3:!1},sortValue:"sortByPrice"},J=function(e,t){var a=M({},e,{stopsValue:M({},e.stopsValue,Object(u.a)({},t,!e.stopsValue[t]))});return!1===function(e){var t=!1;for(var a in e)!0===e[a]&&(t=!0);return t}(a.stopsValue)?a=M({},e,{stopsValue:M({},a.stopsValue,{all:!0})}):a},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TICKETS_SUCCESS":return M({},e,{tickets:t.payload,isTicketsLoaded:!0});case"FETCH_TICKETS_FAILURE":return M({},e,{isTicketsLoaded:!1,error:t.payload});case"SET_STOPS_VALUE":return J(e,t.payload);case"SET_SORT_VALUE":return M({},e,{sortValue:t.payload});default:return e}},q=Object(H.b)(z,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),G=new function e(){var t=this;Object(m.a)(this,e),this.getResource=function(){var e=Object(R.a)(U.a.mark(function e(t){var a,n,r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.next=8,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(n.searchId));case 8:return r=e.sent,e.abrupt("return",r.json());case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getTickets=Object(R.a)(U.a.mark(function e(){var a;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("https://front-test.beta.aviasales.ru/search");case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))};i.a.render(r.a.createElement(s.a,{store:q},r.a.createElement(B,null,r.a.createElement(N,{value:G},r.a.createElement(F,null)))),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.e4c0684d.chunk.js.map