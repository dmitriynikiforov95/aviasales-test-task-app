{"version":3,"sources":["svg/Logo.svg","components/tickets-list-sort-settings/tickets-list-sort-settings.js","actions/index.js","components/tickets-list-sort-settings/index.js","components/tickets-list-item/index.js","components/tickets-list-item/tickets-list-item.js","components/tickets-list/index.js","components/tickets-list/tickets-list.js","components/aviasales-service-context/aviasales-service-context.js","components/hoc/index.js","components/hoc/with-aviasales-service.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/spinner/index.js","components/spinner/spinner.js","containers/tickets-list-container.js","components/tickets-list-filter/tickets-list-filter.js","components/tickets-list-filter/index.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","reducers/index.js","store.js","index.js","services/aviasales-service.js"],"names":["module","exports","TicketsListSortSettings","props","state","price","duration","setActiveButton","bind","currentValue","otherValue","sortSetting","this","setSortValue","setState","className","id","type","onClick","e","value","Component","mapDispatchToProps","payload","connect","TicketsListItem","ticket","transformTicketPrice","String","split","splice","ticketPrice","join","src","carrier","alt","segments","map","segment","idx","ticketDurationInHours","Math","floor","ticketDurationInMinutes","ticketDuration","ticketTransfers","stops","length","departureTime","Date","date","arrivalTime","setSeconds","getSeconds","key","origin","destination","getHours","slice","getMinutes","TicketsList","tickets","React","createContext","AviasalesServiceProvider","Provider","AviasalesServiceConsumer","Consumer","withAviasalesService","Wrapped","aviasalesService","ErrorIndicator","Spinner","TicketsListContainer","ticketsLoaded","ticketsError","getTickets","then","res","catch","error","message","isTicketsLoaded","spinner","hasData","errorMessage","content","Fragment","sortByPrice","a","b","sortByDuration","summDuration","sortAndFilter","stopsValue","sortValue","newTickets","reduce","prev","curr","all","filter","sort","setStopsValue","TicketsListFilter","htmlFor","defaultChecked","onChange","checked","zero","one","two","three","App","logo","ErrorBoundry","hasError","children","initialState","0","1","2","3","newState","obj","findFalseValue","reducer","action","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","getResource","url","fetch","keyRequest","json","searchId","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e4c0684d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Logo.96990a1b.svg\";","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setSortValue } from \"../../actions\";\r\nimport \"./tickets-list-sort-settings.css\";\r\n\r\nclass TicketsListSortSettings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      price: true,\r\n      duration: false\r\n    };\r\n    this.setActiveButton = this.setActiveButton.bind(this);\r\n  }\r\n\r\n  setActiveButton(currentValue, otherValue, sortSetting) {\r\n    this.props.setSortValue(sortSetting);\r\n    this.setState(state => {\r\n      if (!state[currentValue]) {\r\n        return {\r\n          [currentValue]: !state[currentValue],\r\n          [otherValue]: !state[otherValue]\r\n        };\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"tickets-sort-settings-wrapper\">\r\n        <input\r\n          id=\"price\"\r\n          className={\r\n            \"tickets-sort-settings-btn \" +\r\n            (this.state.price === true ? \"active\" : \"\")\r\n          }\r\n          type=\"button\"\r\n          onClick={e =>\r\n            this.setActiveButton(\"price\", \"duration\", \"sortByPrice\")\r\n          }\r\n          value=\"Самый дешевый\"\r\n        />\r\n\r\n        <input\r\n          id=\"duration\"\r\n          className={\r\n            \"tickets-sort-settings-btn \" +\r\n            (this.state.duration === true ? \"active\" : \"\")\r\n          }\r\n          type=\"button\"\r\n          onClick={e =>\r\n            this.setActiveButton(\"duration\", \"price\", \"sortByDuration\")\r\n          }\r\n          value=\"Самый быстрый\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setSortValue\r\n};\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(TicketsListSortSettings);\r\n","\r\nconst ticketsLoaded = (newTickets) => {\r\n    return {\r\n      type: 'FETCH_TICKETS_SUCCESS',\r\n      payload: newTickets\r\n    }\r\n}\r\nconst ticketsError = (error) => {\r\n    return {\r\n      type: 'FETCH_TICKETS_FAILURE',\r\n      payload: error\r\n    }\r\n}\r\n\r\nconst setStopsValue = (stops) => {\r\n    return {\r\n      type:\"SET_STOPS_VALUE\",\r\n      payload: stops\r\n    }\r\n  }\r\n\r\n  const setSortValue = (value) => {\r\n    return {\r\n        type:\"SET_SORT_VALUE\",\r\n        payload: value\r\n      }\r\n  }\r\n\r\n\r\n\r\nexport {\r\n    ticketsLoaded,\r\n    ticketsError,\r\n    setStopsValue,\r\n    setSortValue,\r\n}\r\n","import TicketsListSortSettings from './tickets-list-sort-settings';\r\n\r\nexport default TicketsListSortSettings;","import TicketsListItem from './tickets-list-item.js';\r\n\r\nexport default TicketsListItem;","import React from \"react\";\r\nimport \"./tickets-list-item.css\";\r\nconst TicketsListItem = ({ ticket }) => {\r\n\r\n  let ticketPriceToString = String(ticket.price);\r\n  let transformTicketPrice = ticketPriceToString.split(\"\");\r\n  transformTicketPrice.splice(-3, 0, \" \");\r\n  let ticketPrice = transformTicketPrice.join(\"\");\r\n\r\n  return (\r\n    <div className=\"ticket-item-wrapper\"> \r\n      <div className=\"ticket-item-header\">\r\n        <p className=\"ticket-item-price\">{ticketPrice} Р</p>\r\n        <img\r\n          className=\"ticket-item-logo\"\r\n          src={`//pics.avs.io/99/36/${ticket.carrier}.png`}\r\n          alt=\"Company-logo\"\r\n        />\r\n      </div>\r\n\r\n      <ul>\r\n        {ticket.segments.map((segment, idx) => {\r\n          const ticketDurationInHours = Math.floor(segment.duration / 60);\r\n          const ticketDurationInMinutes =\r\n            segment.duration - ticketDurationInHours * 60;\r\n          const ticketDuration = `${ticketDurationInHours}ч ${ticketDurationInMinutes}м`;\r\n          const ticketTransfers =\r\n            segment.stops.length > 1\r\n              ? `${segment.stops.length} пересадки`\r\n              : segment.stops.length > 0\r\n              ? `${segment.stops.length} пересадка`\r\n              : `${segment.stops.length} пересадок`;\r\n          const departureTime = new Date(segment.date);\r\n          const arrivalTime = new Date(segment.date);\r\n          arrivalTime.setSeconds(departureTime.getSeconds() + segment.duration);\r\n\r\n          return (\r\n            <li key={idx}>\r\n              <div className=\"ticket-item-content\">\r\n                <div className=\"ticket-item-route\">\r\n                  <p className=\"ticket-item-route-title\">\r\n                    {segment.origin} – {segment.destination}\r\n                  </p>\r\n                  <p className=\"ticket-item-route-text\">\r\n                    {`${(\"0\" + departureTime.getHours()).slice(-2)}:${(\r\n                      \"0\" + departureTime.getMinutes()\r\n                    ).slice(-2)}`}{\" \"}\r\n                    –{\" \"}\r\n                    {`${(\"0\" + arrivalTime.getHours()).slice(-2)}:${(\r\n                      \"0\" + arrivalTime.getMinutes()\r\n                    ).slice(-2)}`}\r\n                  </p>\r\n                </div>\r\n                <div className=\"ticket-item-route\">\r\n                  <p className=\"ticket-item-route-title\">В пути</p>\r\n                  <p className=\"ticket-item-route-text\">{ticketDuration}</p>\r\n                </div>\r\n                <div className=\"ticket-item-route\">\r\n                  <p className=\"ticket-item-route-title\">{ticketTransfers}</p>\r\n                  <p className=\"ticket-item-route-text\">\r\n                    {segment.stops.join(\", \")}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicketsListItem;\r\n","import TicketsList from './tickets-list';\r\n\r\nexport default TicketsList;","import React from \"react\";\r\nimport TicketsListItem from \"../tickets-list-item\";\r\n\r\n\r\nconst TicketsList = ({ tickets }) =>  {\r\n    return (\r\n      <ul>\r\n        {tickets.map((ticket, idx) => {\r\n          return (\r\n            <li key={idx}>\r\n              <TicketsListItem ticket={ticket} />\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default TicketsList;\r\n","import React from 'react';\r\n\r\nconst {\r\n    Provider: AviasalesServiceProvider,\r\n    Consumer: AviasalesServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    AviasalesServiceProvider,\r\n    AviasalesServiceConsumer\r\n}\r\n\r\n","import withAviasalesService from './with-aviasales-service';\r\n\r\nexport default withAviasalesService;","import React from \"react\";\r\nimport { AviasalesServiceConsumer } from \"../aviasales-service-context\";\r\n\r\nconst withAviasalesService = Wrapped => {\r\n  return props => {\r\n    return (\r\n      <AviasalesServiceConsumer>\r\n        {aviasalesService => {\r\n          return <Wrapped {...props} aviasalesService={aviasalesService} />;\r\n        }}\r\n      </AviasalesServiceConsumer>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withAviasalesService;\r\n\r\n","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;","import React from \"react\";\r\nimport \"./error-indicator.css\";\r\n\r\nconst ErrorIndicator = () => {\r\n  return (\r\n    <div className=\"error-indicator-wrapper\">\r\n      <div className=\"error-message-wrapper\">\r\n        <div className=\"error-message-title\">Ошибка</div>\r\n        <div>Билеты не загружены <br/> Перезагрузите страницу!</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorIndicator;\r\n","import Spinner from './spinner';\r\n\r\nexport default Spinner;","import React from \"react\";\r\nimport \"./spinner.css\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"lds-css wrapper\">\r\n        <div className=\"lds-magnify\">\r\n            <div><div>\r\n                <div></div>\r\n                <div></div>\r\n            </div></div>\r\n        </div>\r\n    </div>\r\n);\r\n;\r\n};\r\n\r\nexport default Spinner;\r\n","import React, { Component } from \"react\";\r\nimport TicketsList from \"../components/tickets-list\";\r\nimport withAviasalesService from \"../components/hoc\";\r\nimport ErrorIndicator from \"../components/error-indicator\";\r\nimport Spinner from \"../components/spinner/\";\r\nimport { connect } from \"react-redux\";\r\nimport { ticketsLoaded, ticketsError } from \"../actions\";\r\n\r\nclass TicketsListContainer extends Component {\r\n  componentDidMount() {\r\n    \r\n    const {\r\n      aviasalesService,\r\n      ticketsLoaded,\r\n      ticketsError\r\n    } = this.props;\r\n    aviasalesService\r\n      .getTickets()\r\n      .then(res => {\r\n        ticketsLoaded(res.tickets);\r\n      })\r\n      .catch(error => {\r\n        ticketsError(error.message);\r\n      });\r\n  }\r\n\r\n\r\n  render() {\r\n    const { tickets, isTicketsLoaded, error } = this.props;\r\n    const spinner = !isTicketsLoaded && !error ? <Spinner /> : null;\r\n    const hasData = isTicketsLoaded || error;\r\n    const errorMessage = error ? <ErrorIndicator /> : null;\r\n    const content = hasData ? <TicketsList tickets={tickets} /> : null;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {errorMessage}\r\n        {spinner}\r\n        {content}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst sortByPrice = (a, b) => {\r\n  return a.price < b.price ? -1 : a.price > b.price ? 1 : 0;\r\n};\r\nconst sortByDuration = (a, b) => {\r\n  return a.summDuration() < b.summDuration()\r\n    ? -1\r\n    : a.summDuration() > b.summDuration()\r\n    ? 1\r\n    : 0;\r\n};\r\n\r\nfunction sortAndFilter(tickets, stopsValue, sortValue) {\r\n  let newTickets = tickets;\r\n\r\n  for (let ticket of newTickets) {\r\n    ticket.summDuration = function() {\r\n      return this.segments.reduce((prev, curr) => {\r\n        return prev + curr.duration;\r\n      }, 0);\r\n    };\r\n  }\r\n\r\n  // Фильтруем билеты по количество пересадок в одну сторону\r\n\r\n  newTickets = stopsValue.all\r\n    ? tickets\r\n    : tickets.filter(ticket => {\r\n        for (let segment of ticket.segments) {\r\n          if (!stopsValue[segment.stops.length]) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      });\r\n\r\n  // Вариант фильтрации билетов по обществу количеству пересадок\r\n  /* tickets.filter(ticket => {\r\n        let ticketStopsQuantity = 0;\r\n        for (let segment of ticket.segments) {\r\n          ticketStopsQuantity += segment.stops.length;\r\n        }\r\n        if (stopsValue[ticketStopsQuantity]) {\r\n          return true;\r\n        }\r\n        return false;\r\n      }); */\r\n\r\n  if (sortValue === \"sortByPrice\") {\r\n    newTickets = newTickets.sort(sortByPrice);\r\n  } else if (sortValue === \"sortByDuration\") {\r\n    newTickets = newTickets.sort(sortByDuration);\r\n  }\r\n  return newTickets.slice(0, 5);\r\n}\r\n\r\nconst mapStateToProps = ({\r\n  tickets,\r\n  isTicketsLoaded,\r\n  stopsValue,\r\n  sortValue,\r\n  error\r\n}) => {\r\n  return {\r\n    tickets: sortAndFilter(tickets, stopsValue, sortValue),\r\n    isTicketsLoaded,\r\n    error\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  ticketsLoaded,\r\n  ticketsError\r\n};\r\n\r\nexport default withAviasalesService(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(TicketsListContainer)\r\n);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setStopsValue } from \"../../actions\";\r\nimport \"./tickets-list-filter.css\";\r\n\r\nconst TicketsListFilter = ({ stopsValue, setStopsValue }) => {\r\n  return (\r\n    <div className=\"tickets-filter-wrapper\">\r\n      <h2 className=\"tickets-filter-title\">Количество пересадок</h2>\r\n\r\n      <ul className=\"tickets-filter-list\">\r\n        <li className=\"tickets-filter-list-item\">\r\n          <label className=\"tickets-filter-list-item-label\" htmlFor=\"chk-all\">\r\n            <input\r\n              id=\"chk-all\"\r\n              type=\"checkbox\"\r\n              className=\"visually-hidden\"\r\n              defaultChecked={stopsValue.all}\r\n              onChange={() => setStopsValue(\"all\")}\r\n              checked={stopsValue.all}\r\n            />\r\n            <span className=\"checkbox-indicator\" /> Все\r\n          </label>\r\n        </li>\r\n\r\n        <li className=\"tickets-filter-list-item\">\r\n          <label className=\"tickets-filter-list-item-label\" htmlFor=\"chk-0\">\r\n            <input\r\n              id=\"chk-0\"\r\n              type=\"checkbox\"\r\n              className=\"visually-hidden\"\r\n              onChange={() => setStopsValue(\"0\")}\r\n              checked={stopsValue.zero}\r\n            />\r\n            <span className=\"checkbox-indicator\" /> Без пересадок\r\n          </label>\r\n        </li>\r\n        <li className=\"tickets-filter-list-item\">\r\n          <label className=\"tickets-filter-list-item-label\" htmlFor=\"chk-1\">\r\n            <input\r\n              id=\"chk-1\"\r\n              type=\"checkbox\"\r\n              className=\"visually-hidden\"\r\n              onChange={() => setStopsValue(\"1\")}\r\n              checked={stopsValue.one}\r\n            />\r\n            <span className=\"checkbox-indicator\" /> 1 пересадка\r\n          </label>\r\n        </li>\r\n        <li className=\"tickets-filter-list-item\">\r\n          <label className=\"tickets-filter-list-item-label\" htmlFor=\"chk-2\">\r\n            <input\r\n              id=\"chk-2\"\r\n              type=\"checkbox\"\r\n              className=\"visually-hidden\"\r\n              onChange={() => setStopsValue(\"2\")}\r\n              checked={stopsValue.two}\r\n            />\r\n            <span className=\"checkbox-indicator\" /> 2 пересадки\r\n          </label>\r\n        </li>\r\n        <li className=\"tickets-filter-list-item\">\r\n          <label className=\"tickets-filter-list-item-label\" htmlFor=\"chk-3\">\r\n            <input\r\n              id=\"chk-3\"\r\n              type=\"checkbox\"\r\n              className=\"visually-hidden\"\r\n              onChange={() => setStopsValue(\"3\")}\r\n              checked={stopsValue.three}\r\n            />\r\n            <span className=\"checkbox-indicator\" /> 3 пересадки\r\n          </label>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ stopsValue }) => {\r\n  return {\r\n    stopsValue\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  setStopsValue\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(TicketsListFilter);\r\n","import TicketsListFilter from './tickets-list-filter';\r\n\r\nexport default TicketsListFilter;","import App from './app';\r\n\r\nexport default App;","import React from \"react\";\r\nimport \"./app.css\";\r\nimport logo from \"../../svg/Logo.svg\";\r\nimport TicketsListSortSettings from \"../tickets-list-sort-settings\";\r\nimport TicketsListContainer from \"../../containers/tickets-list-container\";\r\nimport TicketsListFilter from \"../tickets-list-filter\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className=\"app-wrapp\">\r\n      <div className=\"app-logo-wrapper\">\r\n        <img src={logo} alt=\"logo\" />\r\n      </div>\r\n      <div className=\"components-wrapper\">\r\n        <div>\r\n          <TicketsListFilter />\r\n        </div>\r\n        <div>\r\n          <TicketsListSortSettings />\r\n          <TicketsListContainer />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;","import React, { Component } from \"react\";\r\nimport ErrorIndicator from \"../error-indicator\";\r\n\r\nexport default class ErrorBoundry extends Component {\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({\r\n      hasError: true\r\n    });\r\n  }\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n","const initialState = {\r\n  tickets: [],\r\n  isTicketsLoaded: false,\r\n  error:null,\r\n  stopsValue: {\r\n    all: true,\r\n    0: false,\r\n    1: false,\r\n    2: false,\r\n    3: false\r\n  },\r\n  sortValue: \"sortByPrice\"\r\n};\r\n\r\nconst findFalseValue = obj => {\r\n  let value = false;\r\n  for (var key in obj) {\r\n    if (obj[key] === true) {\r\n      value = true;\r\n    }\r\n  }\r\n  return value;\r\n};\r\n\r\nconst setStopsValue = (state, filter) => {\r\n  let newState = {\r\n    ...state,\r\n    stopsValue: {\r\n      ...state.stopsValue,\r\n      [filter]: !state.stopsValue[filter]\r\n    }\r\n  };\r\n\r\n  return findFalseValue(newState.stopsValue) === false\r\n    ? (newState = {\r\n        ...state,\r\n        stopsValue: {\r\n          ...newState.stopsValue,\r\n          all: true\r\n        }\r\n      })\r\n    : newState;\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_TICKETS_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        tickets: action.payload,\r\n        isTicketsLoaded: true\r\n      };\r\n      case \"FETCH_TICKETS_FAILURE\": \r\n      return {\r\n        ...state,\r\n        isTicketsLoaded: false,\r\n        error: action.payload\r\n      }\r\n    case \"SET_STOPS_VALUE\":\r\n      return setStopsValue(state, action.payload);\r\n    case \"SET_SORT_VALUE\":\r\n      return {\r\n        ...state,\r\n        sortValue: action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore } from \"redux\";\r\n\r\nimport reducer from \"./reducers\";\r\n\r\nconst store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport App from \"./components/app\";\nimport ErrorBoundry from \"./components/error-boundry\";\nimport AviasalesService from \"./services/aviasales-service\";\nimport { AviasalesServiceProvider } from \"./components/aviasales-service-context\";\n\nimport store from \"./store\";\n\nconst aviasalesService = new AviasalesService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <AviasalesServiceProvider value={aviasalesService}>\n        <App />\n      </AviasalesServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n","\r\nexport default class AviasalesService {\r\n   \r\n     getResource = async (url) => {\r\n        const keyRequest = await fetch(url);\r\n        const key = await keyRequest.json();\r\n        const tickets = await fetch(`https://front-test.beta.aviasales.ru/tickets?searchId=${key.searchId}`);\r\n        return tickets.json();\r\n      }\r\n      \r\n    getTickets = async () => {\r\n        const tickets =  await this.getResource(\"https://front-test.beta.aviasales.ru/search\")\r\n        return tickets;\r\n    }\r\n}\r\n\r\n\r\n\r\n"],"sourceRoot":""}